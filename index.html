
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="/js/guard/obf/trc.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.min.js" crossorigin="anonymous"></script>

    <script src="sharedio/sharedio.js"></script>
    <script src="socketioclient.js?v=10"></script>

    <link rel="stylesheet" href="/css/text-effects.css">
    <script src="/js/text-effects.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            overflow-x: hidden;
            width: 100%;
        }

        video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
            z-index: -1;
        }
    </style>

    <script>
        const ASSET_URL = "https://assets.tikfinity.com/widget-christmas-snow/";
        const ASSET_MAP = {
            simple_snow_1: `${ASSET_URL}SimpleSnow/SimpleSnow_stage1.webm`,
            simple_snow_2: `${ASSET_URL}SimpleSnow/SimpleSnow_stage2.webm`,
            simple_snow_3: `${ASSET_URL}SimpleSnow/SimpleSnow_stage3.webm`,
            snow_flakes_1: `${ASSET_URL}SnowFlakes/Snowflakes_stage1.webm`,
            snow_flakes_2: `${ASSET_URL}SnowFlakes/Snowflakes_stage2.webm`,
            soft_snow_1: `${ASSET_URL}SoftSnow/SoftSnow_Stage1.webm`,
            soft_snow_2: `${ASSET_URL}SoftSnow/SoftSnow_Stage2.webm`,
            soft_snow_3: `${ASSET_URL}SoftSnow/SoftSnow_Stage3.webm`,
        }
   
        function getSetting(settingName) {
            return settings["fallingsnow" + "_" + settingName];
        }

        function updateSettings(hasChanges) {
            const variation = getSetting("variation") !== undefined ? getSetting("variation") : "simple_snow_1";            
            
            const video = document.querySelector('#video');
            const source = video.querySelector('#source');
            source.src = ASSET_MAP[variation];

            video.load();
            video.play();
            
            if (!settings) return;
        }

        $(window).on("load", () => {
            updateSettings();
        });
    </script>
</head>

<body>

<div class="widget">
    <video id="video" autoplay muted loop>
        <source id="source" type="video/webm">
    </video>
</div>

<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"65f9075973884fc192143938ea377297","server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>

</html>
